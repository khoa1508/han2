<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¬¬13è¯¾ Â· è¿™æ˜¯ä¸æ˜¯ä¸­è¯ï¼Ÿ â€” Ã”n táº­p tÆ°Æ¡ng tÃ¡c</title>
  <meta name="description" content="Trang web Ã´n táº­p tÆ°Æ¡ng tÃ¡c BÃ i 13: tá»« vá»±ng, ngá»¯ phÃ¡p, máº«u cÃ¢u, bÃ i táº­p. Thiáº¿t káº¿ responsive cho Ä‘iá»‡n thoáº¡i vÃ  mÃ¡y tÃ­nh." />
  <style>
    :root{
      --bg: #0b1020;
      --card: #121934;
      --muted: #8ea2d6;
      --text: #e8eeff;
      --accent: #7aa2ff;
      --accent-2: #21d4a3;
      --warn: #ff8960;
      --good: #45d483;
      --bad: #ff5a7a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    [data-theme=\"light\"]{
      --bg:#f7f9ff; --card:#ffffff; --muted:#5a6aa9; --text:#0b1020; --accent:#3a63ff; --accent-2:#0fb48f; --warn:#ef6c4e; --good:#10a87b; --bad:#e33a5a; --shadow:0 8px 24px rgba(32,41,78,.15);
    }
    [data-theme=\"light\"] body{ background: linear-gradient(120deg,#f5f8ff,#ffffff 60%, #ffffff 100%);}
    html,body{height:100%;}
    body{margin:0;font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Noto Sans, "Liberation Sans", Arial, "Apple Color Emoji","Segoe UI Emoji"; background:linear-gradient(120deg,var(--bg), #0c1430 40%, #0d1a3f 100%); color:var(--text);}
    .container{max-width:1100px;margin:0 auto;padding:18px;}
    header{position:sticky;top:0;background:linear-gradient(180deg,rgba(12,20,48,.9),rgba(12,20,48,.75));backdrop-filter: blur(10px);z-index:50;border-bottom:1px solid rgba(255,255,255,.06);} 
    .brand{display:flex;align-items:center;gap:12px;padding:14px 0;}
    .logo{width:40px;height:40px;border-radius:12px;background:conic-gradient(from 210deg, var(--accent), var(--accent-2));box-shadow:var(--shadow);display:grid;place-items:center;color:white;font-weight:800}
    h1{font-size: clamp(18px, 2.5vw, 28px);margin:0}
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:10px 0 16px}
    .btn{--bgc:var(--card);--bd:rgba(255,255,255,.08);display:inline-flex;align-items:center;gap:8px;background:var(--bgc);color:var(--text);border:1px solid var(--bd);padding:10px 14px;border-radius:14px;cursor:pointer;transition:transform .06s ease, background .2s ease, border-color .2s ease;box-shadow:var(--shadow);}
    .btn:hover{transform:translateY(-1px)}
    .btn[aria-pressed="true"], .btn.primary{--bgc:linear-gradient(135deg,var(--accent), var(--accent-2));--bd:transparent;color:white}
    .btn.small{padding:8px 12px;border-radius:12px;font-size:14px}
    .chip{padding:7px 10px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:999px;font-size:12px}

    nav.tabs{display:flex;flex-wrap:wrap;gap:10px}
    nav.tabs button{flex:1 1 auto;min-width:120px}

    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:14px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);position:relative;}
    .card h3{margin:2px 0 8px;font-size:18px}
    .card .meta{color:var(--muted);font-size:13px}
    .card .vi{display:none;color:#e3ffd8}
    .show-vi .card .vi{display:block}
    .grid{display:grid;gap:14px}
    .two-col{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:900px){.two-col{grid-template-columns:1fr 1fr}}

    section[hidden]{display:none !important}

    .search{display:flex;gap:10px}
    input[type="search"]{flex:1;background:var(--card);border:1px solid rgba(255,255,255,.1);color:var(--text);padding:12px 14px;border-radius:14px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.12);padding:2px 6px;border-radius:6px;font-size:12px}

    .quiz{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px}
    .quiz h4{margin:0 0 12px}
    .opts{display:grid;gap:10px}
    .opt{padding:12px;border:1px solid rgba(255,255,255,.12);border-radius:12px;background:var(--card);cursor:pointer}
    .opt[aria-checked="true"]{outline:2px solid var(--accent)}
    .result{margin-top:8px;font-weight:700}
    .good{color:var(--good)} .bad{color:var(--bad)}

    .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}

    .foot{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:10px}

    /* Drag & drop board */
    .board{background:var(--card);border:1px dashed rgba(255,255,255,.18);border-radius:16px;min-height:220px;padding:10px;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:8px;position:relative}
    .cell{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:12px;display:grid;place-items:center;font-size:20px;min-height:60px}
    .box{position:absolute;inset:calc(50% - 42px) auto auto calc(50% - 42px);width:84px;height:84px;border-radius:12px;background:linear-gradient(135deg,#ffc371,#ff5f6d);display:grid;place-items:center;color:#111;font-weight:900;box-shadow:var(--shadow)}
    .cat{width:54px;height:54px;border-radius:12px;background:linear-gradient(135deg,#b8c6ff,#e0e7ff);display:grid;place-items:center;position:absolute;left:10px;top:10px;user-select:none;touch-action:none;cursor:grab}

    .swatch{width:22px;height:22px;border-radius:8px;border:1px solid rgba(255,255,255,.15)}

    .toast{position:fixed;right:16px;bottom:16px;background:var(--card);border:1px solid rgba(255,255,255,.12);padding:12px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;transform:translateY(8px);transition:.25s;}
    .toast.show{opacity:1;transform:translateY(0)}

    .progress{height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
    .progress > span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent-2));width:0%}

    .kbd-hint{color:var(--muted);font-size:12px}
    .muted{color:var(--muted)}
    .hide{display:none}
      /* Light theme hard-white overrides */
    [data-theme="light"]{ --bg:#ffffff; --card:#ffffff; --muted:#3f4a75; --text:#0a0f1a; --accent:#2d5bff; --accent-2:#0aa37f; --warn:#e85c3f; --good:#0d966f; --bad:#cf2d4f; --shadow:0 8px 24px rgba(32,41,78,.10); }
    [data-theme="light"] body{ background:#ffffff !important; }
    [data-theme="light"] header{ background: linear-gradient(180deg, rgba(255,255,255,.98), rgba(255,255,255,.9)); border-bottom:1px solid rgba(0,0,0,.06); }
    [data-theme="light"] .pill{ background:#f5f7ff; border-color:#e7ecff; }
    [data-theme="light"] .card{ border-color:rgba(0,0,0,.06); }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="logo" aria-hidden="true">13</div>
        <div>
          <h1>ç¬¬13è¯¾ Â· è¿™æ˜¯ä¸æ˜¯ä¸­è¯ï¼Ÿ â€” Ã”n táº­p tÆ°Æ¡ng tÃ¡c</h1>
          <div class="muted" style="font-size:14px">Tá»« vá»±ng Â· Ngá»¯ phÃ¡p Â· Máº«u cÃ¢u Â· BÃ i táº­p Â· Luyá»‡n nÃ³i â€” Thiáº¿t káº¿ cho Ä‘iá»‡n thoáº¡i & mÃ¡y tÃ­nh</div>
        </div>
      </div>
      <div class="toolbar" role="toolbar" aria-label="TÃ¹y chá»n giao diá»‡n">
        <button id="tab-vocab" class="btn primary" data-tab="vocab" aria-pressed="true">ğŸ“š Tá»« vá»±ng</button>
        <button id="tab-grammar" class="btn" data-tab="grammar">ğŸ§© Ngá»¯ phÃ¡p & máº«u cÃ¢u</button>
        <button id="tab-practice" class="btn" data-tab="practice">ğŸ“ BÃ i táº­p</button>
        <button id="tab-review" class="btn" data-tab="review">âš¡ Ã”n táº­p nhanh</button>
        <span class="chip" id="xp">â­ Äiá»ƒm: <b>0</b></span>
        <span class="chip" id="streak">ğŸ”¥ Chuá»—i: <b>0</b></span>
        <span style="flex:1"></span>
        <button id="toggle-vi" class="btn small" aria-pressed="false" title="Hiá»‡n/áº©n nghÄ©a tiáº¿ng Viá»‡t">VI</button>
        <button id="toggle-theme" class="btn small" title="Chuyá»ƒn giao diá»‡n sÃ¡ng/tá»‘i">ğŸŒ“</button>
        <button id="speak-toggle" class="btn small" title="Báº­t/Táº¯t phÃ¡t Ã¢m">ğŸ”Š</button>
        <button id="reset" class="btn small" title="XÃ³a tiáº¿n Ä‘á»™">â™»ï¸</button>
      </div>
    </div>
  </header>

  <main class="container" id="app">
    <!-- VOCAB -->
    <section id="panel-vocab">
      <div class="two-col">
        <div class="card">
          <h3>Tháº» tá»« vá»±ng</h3>
          <div class="muted">Cháº¡m Ä‘á»ƒ nghe; báº­t <span class="kbd">VI</span> Ä‘á»ƒ xem nghÄ©a.</div>
          <div class="search" style="margin:12px 0">
            <input id="vocab-search" type="search" placeholder="TÃ¬m theo HÃ¡n tá»±/VIâ€¦ (vd: ç‰™åˆ· / bÃ n cháº£i)" aria-label="TÃ¬m tá»« vá»±ng" />
            <button class="btn" id="shuffle">ğŸ”€ Trá»™n</button>
          </div>
          <div id="chips" class="toolbar" role="tablist" aria-label="NhÃ³m tá»«"></div>
          <div id="vocab-cards" class="cards" aria-live="polite"></div>
        </div>
        <div class="grid">
          <div class="card">
            <h3>Gá»£i Ã½ chá»§ Ä‘iá»ƒm</h3>
            <div class="muted">Sá»©c khá»e Â· HÃ nh lÃ½/Ä‘á»‹nh vá»‹ Â· Äá»“ dÃ¹ng Â· MÃ u sáº¯c Â· TÃ­nh cháº¥t Â· Thiáº¿t bá»‹ Â· Äá»™ng tá»«</div>
            <div style="margin-top:10px" class="grid">
              <div class="pill">ğŸ©º <b>ä½ ç”Ÿç—…çš„æ—¶å€™ï¼Œè§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ</b><span class="vi">â€” Khi bá»‹ bá»‡nh, báº¡n tháº¥y tháº¿ nÃ o?</span></div>
              <div class="pill">ğŸ“¦ <b>ç®±å­/è¡Œæ</b> Â· <b>é‡Œ/ä¸Š/ä¸‹/å·¦/å³/å‰/å/æ—/å¯¹é¢/ä¸­é—´</b></div>
              <div class="pill">ğŸ§´ <b>æ—¥ç”¨å“</b>: é˜²æ™’éœœã€ç‰™åˆ·ã€å«ç”Ÿçº¸ã€æµ´å·¾ã€æ¹¿å·¾ã€æ´—å‘æ°´ã€æŠ¤å‘ç´ ã€æ²æµ´éœ²</div>
              <div class="pill">ğŸ¨ <b>é¢œè‰²</b>: é»‘/ç™½/çº¢/é»„/ç»¿/ç´« Â· <b>æ·±/æµ…</b></div>
              <div class="pill">âš–ï¸ <b>è½»/é‡</b> Â· ğŸ†• <b>æ–°/æ—§</b></div>
              <div class="pill">ğŸ–Šï¸ é‡è¯: ä»¶/æŠŠ/æœ¬/å¼ /æ”¯/å°/æ¡/ç“¶/åª</div>
            </div>
          </div>
          <div class="card">
            <h3>Máº¹o</h3>
            <ul class="muted">
              <li>Nháº¥n <span class="kbd">VI</span> Ä‘á»ƒ báº­t nghÄ©a tiáº¿ng Viá»‡t.</li>
              <li>Nháº¥n biá»ƒu tÆ°á»£ng <b>ğŸ”Š</b> Ä‘á»ƒ phÃ¡t Ã¢m tá»± Ä‘á»™ng khi báº¥m tháº».</li>
              <li>DÃ¹ng Ã´ tÃ¬m kiáº¿m Ä‘á»ƒ lá»c nhanh.</li>
            </ul>
            <div class="progress" aria-label="Tiáº¿n Ä‘á»™ tháº» Ä‘Ã£ má»Ÿ"><span id="vocab-progress"></span></div>
          </div>
        </div>
      </div>
    </section>

    <!-- GRAMMAR -->
    <section id="panel-grammar" hidden>
      <div class="grid">
        <div class="card">
          <h3>1) Máº«u cÃ¢u: â€¦çš„æ—¶å€™ + è§‰å¾— + å½¢å®¹è¯</h3>
          <div class="muted">Khi â€¦ thÃ¬ cáº£m tháº¥y â€¦</div>
          <p><b>ä½ ç”Ÿç—…çš„æ—¶å€™ï¼Œè§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ</b><span class="vi"> â€” Khi báº¡n bá»‹ bá»‡nh, báº¡n cáº£m tháº¥y tháº¿ nÃ o?</span></p>
          <div class="quiz" data-quiz="when-feel">
            <h4>Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng Ä‘á»ƒ hoÃ n cÃ¢u</h4>
            <div class="q" data-a="èˆ’æœ">æˆ‘ <u>ç”Ÿç—…çš„æ—¶å€™</u> è§‰å¾— ____ ã€‚</div>
            <div class="opts">
              <button class="opt">èˆ’æœ</button>
              <button class="opt">ä¸­è¯</button>
              <button class="opt">è¡Œæ</button>
            </div>
            <div class="result"></div>
          </div>
        </div>

        <div class="card">
          <h3>2) æœ‰ / æ²¡ï¼ˆæœ‰ï¼‰</h3>
          <p>è¡¨ç¤ºâ€œcÃ³/khÃ´ng cÃ³â€. VÃ­ dá»¥: <b>å¦¹å¦¹æœ‰è‹±è¯­ä¹¦å—ï¼Ÿå¦¹å¦¹æ²¡æœ‰è‹±è¯­ä¹¦ã€‚</b></p>
          <div class="quiz" data-quiz="you-meiyou">
            <h4>Äiá»n vÃ o chá»— trá»‘ng</h4>
            <div class="q" data-a="æœ‰">ä½ ç®±å­é‡Œ____æ—¥ç”¨å“å—ï¼Ÿ</div>
            <div class="opts">
              <button class="opt">æœ‰</button>
              <button class="opt">æ˜¯</button>
              <button class="opt">åœ¨</button>
            </div>
            <div class="result"></div>
          </div>
        </div>

        <div class="card">
          <h3>3) So sÃ¡nh nháº¹/Ä‘áº­m & nháº¹/náº·ng</h3>
          <p><b>æ¯”è¾ƒ</b> diá»…n táº£ â€œkhÃ¡/so vá»›iâ€: <b>è¿™ä¸ªé»‘çš„å¾ˆé‡ï¼Œé‚£ä¸ªçº¢çš„<b class="muted">æ¯”è¾ƒ</b>è½»ã€‚</b></p>
          <div class="quiz" data-quiz="bijiao">
            <h4>Chá»n cÃ¢u tá»± nhiÃªn</h4>
            <div class="q" data-a="é‚£ä¸ªçº¢çš„æ¯”è¾ƒè½»ã€‚">A: è¿™ä¸ªé»‘çš„å¾ˆé‡ã€‚B: ____</div>
            <div class="opts">
              <button class="opt">é‚£ä¸ªçº¢çš„æ¯”è¾ƒè½»ã€‚</button>
              <button class="opt">é‚£ä¸ªçº¢çš„æ˜¯è½»æ¯”è¾ƒã€‚</button>
              <button class="opt">é‚£ä¸ªçº¢çš„è½»å¾ˆæ¯”è¾ƒã€‚</button>
            </div>
            <div class="result"></div>
          </div>
        </div>

        <div class="card">
          <h3>4) æ–¹ä½è¯ (vá»‹ trÃ­)</h3>
          <p>é‡Œ/ä¸Š/ä¸‹/å·¦/å³/å‰/å/æ—/å¯¹é¢/ä¸­é—´</p>
          <div class="pill">ä¾‹: å°çŒ«åœ¨ç®±å­çš„ <b>å·¦è¾¹</b> ã€‚</div>
          <div class="pill">ä¾‹: æ‰‹æœºåœ¨ä¹¦çš„ <b>ä¸Šé¢</b> ã€‚</div>
        </div>

        <div class="card">
          <h3>5) é¢œè‰² + çš„ + åè¯</h3>
          <p>è¿™æ”¯ç¬”æ˜¯ <b>é»‘è‰²</b> çš„ã€‚é‚£å°æ‰‹æœºæ˜¯ <b>ç´«è‰²</b> çš„ã€‚è¡£æœ <b>æ·±è“è‰²</b>ã€‚</p>
          <div class="quiz" data-quiz="yansi">
            <h4>Chá»n Ä‘Ãºng</h4>
            <div class="q" data-a="è¿™å°æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚">____</div>
            <div class="opts">
              <button class="opt">è¿™å°æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
              <button class="opt">è¿™æ”¯æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
              <button class="opt">è¿™æœ¬æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
            </div>
            <div class="result"></div>
          </div>
        </div>

        <div class="card">
          <h3>6) é‡è¯ (lÆ°á»£ng tá»«)</h3>
          <p>ä»¶(è¡£æœ) Â· æŠŠ(ä¼) Â· æœ¬(ä¹¦/è¯å…¸) Â· å¼ (é“¶è¡Œå¡) Â· æ”¯(ç¬”) Â· å°(ç”µè„‘/æ‰‹æœº) Â· æ¡(è£¤å­) Â· ç“¶(å•¤é…’) Â· åª(å°é¸Ÿ)</p>
        </div>

        <div class="card">
          <h3>7) è¯¾æ–‡å¯¹è¯ (ClozÃ©)</h3>
          <p>ä»è¯¾æ–‡æ”¹ç¼–ï¼š</p>
          <div class="quiz" data-quiz="dialog1">
            <h4>Äiá»n tá»« cÃ²n thiáº¿u</h4>
            <div class="q" data-a="é‡">Aï¼šæˆ‘çš„å¾ˆ ____ ï¼Œä½ çš„é‡ä¸é‡ï¼Ÿ</div>
            <div class="opts">
              <button class="opt">é‡</button>
              <button class="opt">æ–°</button>
              <button class="opt">é»‘</button>
            </div>
            <div class="result"></div>
          </div>
          <div class="quiz" data-quiz="dialog2">
            <div class="q" data-a="æ¯”è¾ƒè½»">Bï¼šè¿™ä¸ªé»‘çš„å¾ˆé‡ï¼Œé‚£ä¸ªçº¢çš„ ____ ã€‚</div>
            <div class="opts">
              <button class="opt">æ¯”è¾ƒè½»</button>
              <button class="opt">å¾ˆæ—§</button>
              <button class="opt">å¾ˆé»‘</button>
            </div>
            <div class="result"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- PRACTICE -->
    <section id="panel-practice" hidden>
      <div class="grid">
        <div class="card">
          <h3>1) é‡è¯å¡«ç©º â€” chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng</h3>
          <div id="mw-quiz" class="grid"></div>
        </div>

        <div class="card">
          <h3>2) KÃ©o tháº£ vá»‹ trÃ­ â€” å°çŒ«åœ¨ç®±å­çš„â€¦</h3>
          <p class="muted">KÃ©o ğŸ± Ä‘áº¿n vá»‹ trÃ­ Ä‘Æ°á»£c yÃªu cáº§u so vá»›i ğŸ“¦. Há»— trá»£ cáº£m á»©ng.</p>
          <div style="display:flex;gap:14px;flex-wrap:wrap;align-items:center">
            <div id="pos-target" class="pill">Äáº·t: <b class="need">å·¦è¾¹</b></div>
            <button id="pos-next" class="btn small">CÃ¢u khÃ¡c â†»</button>
          </div>
          <div class="board" id="board" aria-label="Báº£ng vá»‹ trÃ­ 3x3">
            <div class="cell" data-pos="å‰è¾¹">å‰</div>
            <div class="cell" data-pos="ä¸Šé¢">ä¸Š</div>
            <div class="cell" data-pos="å¯¹é¢">å¯¹</div>
            <div class="cell" data-pos="å·¦è¾¹">å·¦</div>
            <div class="cell" data-pos="ä¸­é—´">ä¸­</div>
            <div class="cell" data-pos="å³è¾¹">å³</div>
            <div class="cell" data-pos="åè¾¹">å</div>
            <div class="cell" data-pos="ä¸‹é¢">ä¸‹</div>
            <div class="cell" data-pos="æ—è¾¹">æ—</div>
            <div class="box" aria-label="ç®±å­">ğŸ“¦</div>
            <div class="cat" id="cat" draggable="false" aria-label="å°çŒ«">ğŸ±</div>
          </div>
          <div class="result" id="pos-result"></div>
        </div>

        <div class="card">
          <h3>3) MÃ u sáº¯c â€” chá»n mÃ´ táº£ Ä‘Ãºng</h3>
          <div class="quiz" data-quiz="color-pen">
            <div class="q" data-a="è¿™æ”¯ç¬”æ˜¯é»‘è‰²çš„ã€‚">ğŸ–Šï¸ CÃ¢u Ä‘Ãºng lÃ ?</div>
            <div class="opts">
              <button class="opt">è¿™æ”¯ç¬”æ˜¯é»‘è‰²çš„ã€‚</button>
              <button class="opt">è¿™å°ç¬”æ˜¯é»‘è‰²çš„ã€‚</button>
              <button class="opt">è¿™æœ¬ç¬”æ˜¯é»‘è‰²çš„ã€‚</button>
            </div>
            <div class="result"></div>
          </div>
          <div class="quiz" data-quiz="color-phone">
            <div class="q" data-a="è¿™å°æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚">ğŸ“± CÃ¢u Ä‘Ãºng lÃ ?</div>
            <div class="opts">
              <button class="opt">è¿™å°æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
              <button class="opt">è¿™æ”¯æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
              <button class="opt">è¿™æ¡æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚</button>
            </div>
            <div class="result"></div>
          </div>
        </div>

        <div class="card">
          <h3>4) ÄÃ³ng gÃ³i hÃ nh lÃ½ â€” ä»‹ç»5ä¸ªç‰©å“</h3>
          <p class="muted">Chá»n 5 mÃ³n báº¡n muá»‘n mang. Há»‡ thá»‘ng sáº½ táº¡o cÃ¢u máº«u.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap" id="pack-items"></div>
          <div class="foot">
            <button id="pack-generate" class="btn">âœï¸ Táº¡o cÃ¢u tiáº¿ng Trung</button>
            <button id="pack-clear" class="btn">ğŸ§¹ XÃ³a</button>
          </div>
          <div id="pack-output" class="grid"></div>
        </div>

        <div class="card">
          <h3>5) Luyá»‡n nÃ³i â€” phÃ¡t Ã¢m cÃ¢u máº«u</h3>
          <p class="muted">Chá»n cÃ¢u Ä‘á»ƒ nghe, sau Ä‘Ã³ tá»± nháº¡i láº¡i.</p>
          <div id="speak-list" class="grid"></div>
        </div>
      </div>
    </section>

    <!-- REVIEW -->
    <section id="panel-review" hidden>
      <div class="card">
        <h3>Ã”n táº­p nhanh (10 cÃ¢u)</h3>
        <div class="foot">
          <button id="start-review" class="btn">â–¶ï¸ Báº¯t Ä‘áº§u</button>
          <div class="muted">Thá»i gian: <b id="timer">â€”</b></div>
        </div>
        <div id="review-area" class="grid"></div>
      </div>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
  // ====== Dá»® LIá»†U BÃ€I 13 ======
  const DATA = {
    groups: {
      "Sá»©c khá»e": [
        {zh:"ä½ ç”Ÿç—…çš„æ—¶å€™ï¼Œè§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ", vi:"Khi báº¡n bá»‹ bá»‡nh, báº¡n cáº£m tháº¥y tháº¿ nÃ o?"},
        {zh:"èˆ’æœ", vi:"thoáº£i mÃ¡i"},
        {zh:"ä¸èˆ’æœ", vi:"khÃ´ng thoáº£i mÃ¡i"},
        {zh:"ä¸­è¯", vi:"thuá»‘c ÄÃ´ng y"},
        {zh:"è¥¿è¯", vi:"thuá»‘c TÃ¢y y"},
        {zh:"åƒè¯", vi:"uá»‘ng thuá»‘c"},
      ],
      "HÃ nh lÃ½ & vá»‹ trÃ­": [
        {zh:"ç®±å­", vi:"va li / thÃ¹ng"},
        {zh:"è¡Œæ / è¡Œæç®±", vi:"hÃ nh lÃ½ / va li"},
        {zh:"æ—…æ¸¸ / æ—…è¡Œ", vi:"du lá»‹ch / lá»¯ hÃ nh"},
        {zh:"é‡Œè¾¹ / é‡Œé¢", vi:"bÃªn trong"},
        {zh:"æ—è¾¹", vi:"bÃªn cáº¡nh"},
        {zh:"å·¦è¾¹ / å³è¾¹", vi:"bÃªn trÃ¡i / bÃªn pháº£i"},
        {zh:"å¯¹é¢", vi:"Ä‘á»‘i diá»‡n"},
        {zh:"ä¸­é—´", vi:"á»Ÿ giá»¯a"},
        {zh:"ä¸Šé¢", vi:"bÃªn trÃªn"},
        {zh:"ä¸‹è¾¹", vi:"bÃªn dÆ°á»›i"},
        {zh:"å‰è¾¹ / åè¾¹", vi:"phÃ­a trÆ°á»›c / phÃ­a sau"},
      ],
      "Äá»“ dÃ¹ng hÃ ng ngÃ y": [
        {zh:"æ—¥ç”¨å“", vi:"Ä‘á»“ dÃ¹ng hÃ ng ngÃ y"},
        {zh:"é˜²æ™’éœœ", vi:"kem chá»‘ng náº¯ng"},
        {zh:"ç‰™åˆ·", vi:"bÃ n cháº£i"},
        {zh:"å«ç”Ÿçº¸", vi:"giáº¥y vá»‡ sinh"},
        {zh:"æµ´å·¾", vi:"khÄƒn táº¯m"},
        {zh:"æ¹¿å·¾", vi:"khÄƒn Æ°á»›t"},
        {zh:"æ´—å‘æ°´", vi:"dáº§u gá»™i"},
        {zh:"æŠ¤å‘ç´ ", vi:"dáº§u xáº£"},
        {zh:"æ²æµ´éœ²", vi:"sá»¯a táº¯m"},
      ],
      "Váº­t dá»¥ng & thiáº¿t bá»‹": [
        {zh:"è¡£æœ", vi:"quáº§n Ã¡o"},
        {zh:"ä¸€ä»¶è¡£æœ", vi:"má»™t chiáº¿c Ã¡o (lÆ°á»£ng tá»« ä»¶)"},
        {zh:"é›¨ä¼ / ä¸€æŠŠé›¨ä¼", vi:"Ã´/dÃ¹ (1 cÃ¡i æŠŠ)"},
        {zh:"è¯å…¸ / ä¸€æœ¬è¯å…¸", vi:"tá»« Ä‘iá»ƒn (1 quyá»ƒn æœ¬)"},
        {zh:"é“¶è¡Œå¡ / ä¸€å¼ é“¶è¡Œå¡", vi:"tháº» ngÃ¢n hÃ ng (1 tháº» å¼ )"},
        {zh:"ç¬” / ä¸€æ”¯ç¬”", vi:"bÃºt (1 cÃ¢y æ”¯)"},
        {zh:"åœ†ç ç¬” / é“…ç¬” / æ¯›ç¬”", vi:"bÃºt bi / bÃºt chÃ¬ / bÃºt lÃ´ng"},
        {zh:"å¹³æ¿ç”µè„‘ / ç”µè„‘ / æ‰‹æœº", vi:"mÃ¡y tÃ­nh báº£ng / mÃ¡y tÃ­nh / Ä‘iá»‡n thoáº¡i (å°)"},
        {zh:"ä¼˜ç›˜", vi:"USB"},
      ],
      "TÃ­nh cháº¥t & mÃ u": [
        {zh:"è½»", vi:"nháº¹"},
        {zh:"é‡", vi:"náº·ng"},
        {zh:"æ–° / æ—§", vi:"má»›i / cÅ©"},
        {zh:"æ·± / æµ…", vi:"Ä‘áº­m / nháº¡t"},
        {zh:"é»„è‰²", vi:"mÃ u vÃ ng"},
        {zh:"é»‘è‰²", vi:"mÃ u Ä‘en"},
        {zh:"ç´«è‰²", vi:"mÃ u tÃ­m"},
        {zh:"æ·±è“è‰²", vi:"xanh lam Ä‘áº­m"},
      ],
      "KhÃ¡c": [
        {zh:"æ³¡èŒ¶", vi:"pha trÃ "},
        {zh:"èŒ¶å¶", vi:"lÃ¡ trÃ "},
        {zh:"ä½¿ç”¨", vi:"sá»­ dá»¥ng"},
        {zh:"å–", vi:"bÃ¡n"},
      ]
    },
    measureWordQs: [
      {q:"å¦ˆå¦ˆçš„æ¡Œä¸Šæœ‰ä¸‰ ______ é“…ç¬”å’Œä¸€_____ å¹³æ¿ç”µè„‘ã€‚", options:["æ”¯ï¼ŒåŒ","åªï¼Œå°","å°ï¼Œæ”¯","æ”¯ï¼Œå°"], answer:3},
      {q:"å¦ˆå¦ˆåªå–œæ¬¢ç©¿è£™å­ï¼Œæ‰€ä»¥å¥¹çš„è¡£æŸœé‡Œåªæœ‰ ______ è£¤å­ã€‚", options:["ä¸€åŒ","ä¸€å¼ ","ä¸€æ¡","ä¸€å°"], answer:2},
      {q:"å‘¨æœ«æˆ‘å’Œå®¶äººå»åŠ¨ç‰©å›­çœ‹åŠ¨ç‰©ï¼Œæˆ‘çœ‹åˆ°å¾ˆå¤š _____ æ¼‚äº®çš„å°é¸Ÿåœ¨æˆ¿å­é‡Œé£æ¥é£å»ã€‚", options:["æ”¯","æ¡","åª","å°"], answer:2},
      {q:"ä»Šå¤©æ˜¯æˆ‘çš„ç”Ÿæ—¥ï¼Œä½ å–ä¸¤____å•¤é…’å§ï¼", options:["ç“¶","æ”¯","ä¸ª","å°"], answer:0},
    ],
    packable: [
      {id:"sunscreen", zh:"é˜²æ™’éœœ", vi:"kem chá»‘ng náº¯ng", color:"æ©™è‰²"},
      {id:"toothbrush", zh:"ç‰™åˆ·", vi:"bÃ n cháº£i", color:"è“è‰²"},
      {id:"towel", zh:"æµ´å·¾", vi:"khÄƒn táº¯m", color:"ç™½è‰²"},
      {id:"wetwipes", zh:"æ¹¿å·¾", vi:"khÄƒn Æ°á»›t", color:"ç²‰è‰²"},
      {id:"shampoo", zh:"æ´—å‘æ°´", vi:"dáº§u gá»™i", color:"ç»¿è‰²"},
      {id:"conditioner", zh:"æŠ¤å‘ç´ ", vi:"dáº§u xáº£", color:"ç´«è‰²"},
      {id:"gel", zh:"æ²æµ´éœ²", vi:"sá»¯a táº¯m", color:"è“è‰²"},
      {id:"umbrella", zh:"é›¨ä¼", vi:"Ã´/dÃ¹", color:"é»‘è‰²"},
      {id:"dictionary", zh:"è¯å…¸", vi:"tá»« Ä‘iá»ƒn", color:"çº¢è‰²"},
      {id:"usb", zh:"ä¼˜ç›˜", vi:"USB", color:"é“¶è‰²"},
      {id:"phone", zh:"æ‰‹æœº", vi:"Ä‘iá»‡n thoáº¡i", color:"ç´«è‰²"},
      {id:"clothes", zh:"è¡£æœ", vi:"quáº§n Ã¡o", color:"é»„è‰²"},
    ],
    speakSentences: [
      "ä½ ç”Ÿç—…çš„æ—¶å€™ï¼Œè§‰å¾—æ€ä¹ˆæ ·ï¼Ÿ",
      "æˆ‘è¡Œæç®±æœ‰é˜²æ™’éœœï¼Œæˆ‘å¾ˆå–œæ¬¢ä½¿ç”¨å®ƒã€‚",
      "è¿™å°æ‰‹æœºæ˜¯ç´«è‰²çš„ã€‚",
      "è¿™ä¸ªé»‘çš„å¾ˆé‡ï¼Œé‚£ä¸ªçº¢çš„æ¯”è¾ƒè½»ã€‚",
      "å°çŒ«åœ¨ç®±å­çš„å·¦è¾¹ã€‚",
      "æˆ‘å»ä¸­å›½åå¤©ï¼Œæ‰€ä»¥æˆ‘çš„ç®±å­æœ‰å¾ˆå¤šè¡£æœã€‚"
    ]
  };

  // ====== TRáº NG THÃI & TIá»†N ÃCH ======
  const LS_KEY = "l13_state_v1";
  const state = JSON.parse(localStorage.getItem(LS_KEY) || '{}');
  state.xp ??= 0; state.streak ??= 0; state.vocabSeen ??= {};

  const $ = (sel, el=document) => el.querySelector(sel);
  const $$ = (sel, el=document) => [...el.querySelectorAll(sel)];
  const toast = (msg) => { const t = $('#toast'); t.textContent = msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 1800); };
  const save = () => localStorage.setItem(LS_KEY, JSON.stringify(state));
  const addXP = (n=5) => { state.xp += n; state.streak += 1; updateBadges(); save(); };
  const decStreak = () => { state.streak = 0; updateBadges(); save(); };
  const updateBadges = () => { $('#xp b').textContent = state.xp; $('#streak b').textContent = state.streak; };

  document.documentElement.setAttribute('data-theme','light');

  // ====== PHÃT Ã‚M ======
  let speakEnabled = false;
  function speak(txt){
    if(!speakEnabled) return;
    const u = new SpeechSynthesisUtterance(txt);
    u.lang = 'zh-CN';
    u.rate = 0.95; u.pitch = 1; u.volume = 1;
    speechSynthesis.cancel();
    speechSynthesis.speak(u);
  }

  // ====== NAV TABS ======
  const panels = {
    vocab: $('#panel-vocab'),
    grammar: $('#panel-grammar'),
    practice: $('#panel-practice'),
    review: $('#panel-review')
  };
  $$('#tab-vocab, #tab-grammar, #tab-practice, #tab-review').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const tab = btn.dataset.tab; Object.values(panels).forEach(p=>p.hidden=true);
      panels[tab].hidden=false; $$('#tab-vocab, #tab-grammar, #tab-practice, #tab-review').forEach(b=>b.classList.remove('primary')); btn.classList.add('primary');
    });
  });

  // ====== THEME / VI / SPEAK / RESET ======
  $('#toggle-theme').addEventListener('click',()=>{
    const cur = document.documentElement.getAttribute('data-theme');
    document.documentElement.setAttribute('data-theme', cur==='light'? 'dark': 'light');
  });
  $('#toggle-vi').addEventListener('click', e=>{
    const on = document.body.classList.toggle('show-vi');
    e.currentTarget.setAttribute('aria-pressed', on);
  });
  $('#speak-toggle').addEventListener('click', e=>{
    speakEnabled = !speakEnabled; e.currentTarget.setAttribute('aria-pressed', speakEnabled);
    toast(speakEnabled? 'ÄÃ£ báº­t phÃ¡t Ã¢m': 'ÄÃ£ táº¯t phÃ¡t Ã¢m');
  });
  $('#reset').addEventListener('click', ()=>{ localStorage.removeItem(LS_KEY); location.reload(); });

  // ====== VOCAB CARDS ======
  const chips = Object.keys(DATA.groups);
  function renderChips(){
    const box = $('#chips'); box.innerHTML='';
    chips.forEach((c,i)=>{
      const b = document.createElement('button'); b.className='btn small'; b.textContent = c; b.dataset.group = c;
      if(i===0) b.classList.add('primary');
      b.addEventListener('click', ()=>{ $$('#chips .btn').forEach(x=>x.classList.remove('primary')); b.classList.add('primary'); renderVocab(c); });
      box.appendChild(b);
    });
  }
  function renderVocab(group){
    const list = DATA.groups[group];
    const term = $('#vocab-search').value.trim().toLowerCase();
    const box = $('#vocab-cards'); box.innerHTML = '';
    const items = list.filter(x=> (x.zh+ (x.vi||'')).toLowerCase().includes(term));
    items.forEach((item)=>{
      const el = document.createElement('div'); el.className='card'; el.tabIndex=0; el.role='button'; el.ariaLabel = `Tá»«: ${item.zh}`;
      el.innerHTML = `<h3>${item.zh}</h3>${item.pinyin?`<div class="meta">${item.pinyin}</div>`:''}<div class="vi">${item.vi||''}</div>`;
      el.addEventListener('click', ()=>{ speak(item.zh); state.vocabSeen[item.zh]=true; save(); updateVocabProgress(); addXP(1);});
      el.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); el.click(); }});
      box.appendChild(el);
    });
  }
  function updateVocabProgress(){
    const total = Object.values(DATA.groups).flat().length;
    const seen = Object.keys(state.vocabSeen||{}).length;
    $('#vocab-progress').style.width = Math.min(100, Math.round(100*seen/total)) + '%';
  }
  $('#vocab-search').addEventListener('input', ()=>{
    const current = $('#chips .primary')?.dataset.group || chips[0];
    renderVocab(current);
  });
  $('#shuffle').addEventListener('click', ()=>{
    // Shuffle each group order by reassigning
    for(const g of Object.keys(DATA.groups)){
      DATA.groups[g] = DATA.groups[g].sort(()=>Math.random()-.5);
    }
    renderVocab($('#chips .primary')?.dataset.group || chips[0]);
  });

  // ====== QUIZ ENGINE (MCQ) ======
  function initQuizzes(){
    $$('.quiz').forEach(box=>{
      const correctText = box.querySelector('.q').dataset.a;
      box.querySelectorAll('.opt').forEach((btn)=>{
        btn.addEventListener('click', ()=>{
          box.querySelectorAll('.opt').forEach(o=>o.setAttribute('aria-checked','false'));
          btn.setAttribute('aria-checked','true');
          const ok = btn.textContent.trim() === correctText.trim();
          const res = box.querySelector('.result');
          if(ok){ res.innerHTML = `<span class="good">âœ” ÄÃºng!</span>`; addXP(5); speak(correctText); }
          else { res.innerHTML = `<span class="bad">âœ– Sai. ÄÃ¡p Ã¡n: ${correctText}</span>`; decStreak(); }
        });
      });
    });
  }

  // ====== MEASURE WORD QUIZ ======
  function renderMWQuiz(){
    const c = $('#mw-quiz'); c.innerHTML='';
    DATA.measureWordQs.forEach((it, idx)=>{
      const wrap = document.createElement('div'); wrap.className='quiz';
      wrap.innerHTML = `<h4>CÃ¢u ${idx+1}</h4><div class="q">${it.q}</div>`;
      const opts = document.createElement('div'); opts.className='opts';
      it.options.forEach((op,i)=>{
        const b = document.createElement('button'); b.className='opt'; b.textContent = (i+1)+'. '+op; b.addEventListener('click',()=>{
          const correct = it.answer === i; wrap.querySelectorAll('.opt').forEach(o=>o.disabled=true);
          const res = document.createElement('div'); res.className='result'; res.innerHTML = correct? '<span class="good">âœ” ÄÃºng</span>' : `<span class="bad">âœ– Sai</span> Â· ÄÃ¡p Ã¡n: ${(it.answer+1)}. ${it.options[it.answer]}`;
          wrap.appendChild(res); if(correct) addXP(5); else decStreak();
        }); opts.appendChild(b);
      });
      wrap.appendChild(opts); c.appendChild(wrap);
    });
  }

  // ====== POSITION DRAG ======
  const POS_LIST = ['å·¦è¾¹','å³è¾¹','ä¸Šé¢','ä¸‹é¢','å‰è¾¹','åè¾¹','å¯¹é¢','æ—è¾¹','ä¸­é—´'];
  let needPos = 'å·¦è¾¹';
  function setRandomPos(){ needPos = POS_LIST[Math.floor(Math.random()*POS_LIST.length)]; $('.need').textContent = needPos; $('#pos-result').textContent=''; resetCat(); }
  $('#pos-next').addEventListener('click', setRandomPos);

  // Simple drag via pointer events
  function resetCat(){ const cat=$('#cat'); cat.style.left='10px'; cat.style.top='10px'; }
  (function enableDrag(){
    const el = $('#cat'); const board = $('#board'); let startX=0,startY=0,origX=0,origY=0, dragging=false;
    function onDown(e){ dragging=true; el.style.cursor='grabbing'; const p = getPoint(e); startX=p.x; startY=p.y; origX=parseFloat(el.style.left)||0; origY=parseFloat(el.style.top)||0; e.preventDefault(); }
    function onMove(e){ if(!dragging) return; const p=getPoint(e); const dx=p.x-startX, dy=p.y-startY; el.style.left=(origX+dx)+'px'; el.style.top=(origY+dy)+'px'; }
    function onUp(){ if(!dragging) return; dragging=false; el.style.cursor='grab'; checkPos(); }
    function getPoint(ev){ if(ev.touches?.[0]) return {x:ev.touches[0].clientX, y:ev.touches[0].clientY}; return {x:ev.clientX,y:ev.clientY}; }
    el.addEventListener('mousedown', onDown); el.addEventListener('touchstart', onDown, {passive:false});
    window.addEventListener('mousemove', onMove); window.addEventListener('touchmove', onMove, {passive:false});
    window.addEventListener('mouseup', onUp); window.addEventListener('touchend', onUp);
  })();

  function checkPos(){
    const cat = $('#cat').getBoundingClientRect();
    const box = $('.box').getBoundingClientRect();
    let ok=false;
    const pad = 16; // tolerance
    switch(needPos){
      case 'å·¦è¾¹': ok = cat.right <= box.left - pad; break;
      case 'å³è¾¹': ok = cat.left >= box.right + pad; break;
      case 'ä¸Šé¢': ok = cat.bottom <= box.top - pad; break;
      case 'ä¸‹é¢': ok = cat.top >= box.bottom + pad; break;
      case 'å‰è¾¹': ok = cat.top < box.top && Math.abs((cat.left+cat.right)/2 - (box.left+box.right)/2) < 120; break;
      case 'åè¾¹': ok = cat.top > box.bottom && Math.abs((cat.left+cat.right)/2 - (box.left+box.right)/2) < 120; break;
      case 'å¯¹é¢': ok = Math.abs((cat.left+cat.right)/2 - (box.left+box.right)/2) < 20 && (cat.top < box.top - 80 || cat.top > box.bottom + 80); break;
      case 'æ—è¾¹': ok = (Math.abs(cat.left - box.right) < 60 || Math.abs(cat.right - box.left) < 60) && Math.abs((cat.top+cat.bottom)/2 - (box.top+box.bottom)/2) < 60; break;
      case 'ä¸­é—´': ok = (cat.left > box.left && cat.right < box.right && cat.top > box.top && cat.bottom < box.bottom); break;
    }
    const res = $('#pos-result');
    if(ok){ res.innerHTML = '<span class="good">âœ” æ­£ç¡®ï¼</span>'; addXP(6); speak(`å°çŒ«åœ¨ç®±å­çš„${needPos}`); setTimeout(setRandomPos, 1000); }
    else { res.innerHTML = '<span class="bad">âœ– è¿˜ä¸å¯¹ï¼Œå†è¯•è¯•ï¼</span>'; decStreak(); }
  }
  setRandomPos();

  // ====== PACK GAME ======
  const chosen = new Set();
  function renderPackItems(){
    const box = $('#pack-items'); box.innerHTML='';
    DATA.packable.forEach(it=>{
      const b = document.createElement('button'); b.className='btn small'; b.textContent = `${it.zh} (${it.vi})`; b.dataset.id = it.id;
      b.addEventListener('click', ()=>{ if(chosen.has(it.id)) { chosen.delete(it.id); b.classList.remove('primary'); } else if(chosen.size<5){ chosen.add(it.id); b.classList.add('primary'); } else { toast('Tá»‘i Ä‘a 5 mÃ³n'); } });
      box.appendChild(b);
    });
  }
  $('#pack-generate').addEventListener('click', ()=>{
    const out = $('#pack-output'); out.innerHTML='';
    if(chosen.size===0){ toast('HÃ£y chá»n Ã­t nháº¥t 1 mÃ³n'); return; }
    const items = DATA.packable.filter(x=>chosen.has(x.id));
    const sents = [];
    sents.push(`æˆ‘è¡Œææœ‰å¾ˆå¤šä¸œè¥¿ï¼Œæˆ‘ç»™ä½ ä»‹ç»${items.length}ä¸ªï¼š`);
    items.forEach((it,i)=>{
      const color = it.color || 'é¢œè‰²';
      if(i===0){ sents.push(`æˆ‘è¡Œæç®±æœ‰ä¸€ä»¶${color}çš„${it.zh}ï¼Œæˆ‘å¾ˆå–œæ¬¢ä½¿ç”¨å®ƒã€‚`); }
      else if(i===1){ sents.push(`æˆ‘å»ä¸­å›½åå¤©ï¼Œæ‰€ä»¥æˆ‘çš„ç®±å­æœ‰å¾ˆå¤šè¡£æœï¼Œè¿˜æœ‰${it.zh}ã€‚`); }
      else { sents.push(`æˆ‘çš„è¡Œæç®±ä¹Ÿæœ‰${it.zh}ã€‚`); }
    });
    sents.forEach(s=>{
      const p = document.createElement('div'); p.className='pill'; p.textContent = s; p.addEventListener('click', ()=>speak(s)); out.appendChild(p);
    });
    addXP(5);
  });
  $('#pack-clear').addEventListener('click', ()=>{ chosen.clear(); renderPackItems(); $('#pack-output').innerHTML=''; });

  // ====== SPEAK LIST ======
  function renderSpeakList(){
    const box = $('#speak-list'); box.innerHTML='';
    DATA.speakSentences.forEach(s=>{
      const b = document.createElement('button'); b.className='btn'; b.textContent = s; b.addEventListener('click', ()=>speak(s)); box.appendChild(b);
    });
  }

  // ====== REVIEW MODE ======
  const REVIEW_BANK = [
    {q:'æˆ‘ç”Ÿç—…çš„æ—¶å€™è§‰å¾—____ã€‚', opts:['èˆ’æœ','è¡Œæ','ä¸­è¯'], a:0},
    {q:'è¿™å°æ‰‹æœºæ˜¯____çš„ã€‚', opts:['ç´«è‰²','ä¸€æœ¬','æ¯”è¾ƒ'], a:0},
    {q:'â€œè£¤å­â€çš„é‡è¯ lÃ ?', opts:['æ¡','æ”¯','æœ¬'], a:0},
    {q:'å°çŒ«åœ¨ç®±å­çš„____ã€‚ (opposite side gáº§n nhÆ° Ä‘á»‘i diá»‡n)', opts:['å¯¹é¢','é‡Œé¢','ä¸Šé¢'], a:0},
    {q:'â€œç‰™åˆ·â€ tiáº¿ng Viá»‡t lÃ ?', opts:['bÃ n cháº£i','khÄƒn táº¯m','kem chá»‘ng náº¯ng'], a:0},
    {q:'é€‰æ‹©æ­£ç¡®ï¼šé‚£ä¸ªçº¢çš„____ã€‚', opts:['æ¯”è¾ƒè½»','è½»æ¯”è¾ƒ','æ¯”è¾ƒå¾ˆè½»'], a:0},
    {q:'â€œé‡/è½»â€ nghÄ©a lÃ ?', opts:['náº·ng/nháº¹','má»›i/cÅ©','Ä‘áº­m/nháº¡t'], a:0},
    {q:'é“¶è¡Œå¡ dÃ¹ng lÆ°á»£ng tá»«?', opts:['å¼ ','æ”¯','æŠŠ'], a:0},
    {q:'è¿™æ”¯ç¬”æ˜¯____è‰²çš„ã€‚', opts:['é»‘','æ¡','å¼ '], a:0},
    {q:'æˆ‘è¡Œæç®±æœ‰_____ï¼Œæˆ‘å¾ˆå–œæ¬¢ä½¿ç”¨å®ƒã€‚', opts:['é˜²æ™’éœœ','æ¯”è¾ƒè½»','å¾ˆæ—§'], a:0},
  ];
  let reviewTimer=null, left=0, score=0;
  $('#start-review').addEventListener('click', ()=>{
    const area = $('#review-area'); area.innerHTML='';
    score = 0; left = 60; $('#timer').textContent = left + 's';
    const qs = REVIEW_BANK.sort(()=>Math.random()-.5).slice(0,10);
    qs.forEach((it,i)=>{
      const wrap = document.createElement('div'); wrap.className='quiz';
      wrap.innerHTML = `<h4>CÃ¢u ${i+1}</h4><div class="q">${it.q}</div>`;
      const opts = document.createElement('div'); opts.className='opts';
      it.opts.forEach((op,idx)=>{
        const b = document.createElement('button'); b.className='opt'; b.textContent = op; b.addEventListener('click',()=>{
          opts.querySelectorAll('.opt').forEach(x=>x.disabled=true);
          const ok = idx===it.a; const r=document.createElement('div'); r.className='result';
          if(ok){ r.innerHTML='<span class="good">âœ”</span>'; score++; addXP(2);} else { r.innerHTML='<span class="bad">âœ–</span>'; decStreak(); }
          wrap.appendChild(r);
        }); opts.appendChild(b);
      }); wrap.appendChild(opts); area.appendChild(wrap);
    });
    if(reviewTimer) clearInterval(reviewTimer);
    reviewTimer = setInterval(()=>{ left--; $('#timer').textContent = left + 's'; if(left<=0){ clearInterval(reviewTimer); toast('Háº¿t giá»! Äiá»ƒm: '+score+'/10'); } }, 1000);
  });

  // ====== INIT ======
  function init(){
    updateBadges(); renderChips(); renderVocab(chips[0]); updateVocabProgress(); initQuizzes(); renderMWQuiz(); renderPackItems(); renderSpeakList();
  }
  init();
  </script>
</body>
</html>
