<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luyá»‡n Viáº¿t Tiáº¿ng Trung: Má»™t NgÃ y Cá»§a TÃ´i</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .suggestion-card {
            transition: all 0.3s ease-in-out;
        }
        .suggestion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .suggestion-content.open {
            max-height: 1000px; /* Adjust as needed */
        }
        .vocab-btn {
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .vocab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .vocab-btn .pinyin, .vocab-btn .vietnamese {
            display: none;
        }
        #vocab-container.show-pinyin .pinyin {
            display: inline;
        }
        #vocab-container.show-vietnamese .vietnamese {
            display: block;
        }
        .speaker-icon {
            cursor: pointer;
            font-size: 1.2rem;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .speaker-icon:hover {
            opacity: 1;
        }
        /* Custom Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #14B8A6; /* teal-500 */
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #14B8A6; /* teal-500 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-700">Luyá»‡n Viáº¿t: Má»™t NgÃ y Cá»§a TÃ´i</h1>
            <h2 class="text-2xl md:text-3xl font-semibold text-gray-600 mt-2">æˆ‘çš„ä¸€å¤©</h2>
            <p class="mt-4 text-gray-500 max-w-2xl mx-auto">Sá»­ dá»¥ng khung soáº¡n tháº£o bÃªn dÆ°á»›i Ä‘á»ƒ viáº¿t má»™t Ä‘oáº¡n vÄƒn mÃ´ táº£ má»™t ngÃ y cá»§a báº¡n. Báº¡n cÃ³ thá»ƒ dÃ¹ng cÃ¡c cÃ´ng cá»¥ há»— trá»£ Ä‘á»ƒ tham kháº£o tá»« vá»±ng, cáº¥u trÃºc cÃ¢u vÃ  bÃ i vÄƒn máº«u.</p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Writing Area -->
            <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-lg">
                <h3 class="text-xl font-semibold mb-4 text-teal-600">Khung soáº¡n tháº£o</h3>
                <textarea id="writingArea" class="w-full h-96 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition duration-200" placeholder="Báº¯t Ä‘áº§u viáº¿t á»Ÿ Ä‘Ã¢y... (ä¾‹å¦‚ï¼šæˆ‘æ¯å¤©æ—©ä¸Šå…­ç‚¹åŠèµ·åºŠ...)"></textarea>
                <div class="flex justify-between items-center mt-4">
                    <button id="clearButton" class="px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition shadow-md">XÃ³a toÃ n bá»™</button>
                    <div id="charCounter" class="text-gray-500 font-medium">Sá»‘ chá»¯: 0</div>
                </div>
            </div>

            <!-- Suggestions Sidebar -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Vocabulary Suggestions -->
                <div class="suggestion-card bg-white p-4 rounded-2xl shadow-lg">
                    <button class="toggle-button w-full text-left font-bold text-lg text-teal-700 flex justify-between items-center">
                        <span>ğŸ’¡ Gá»£i Ã½ Tá»« vá»±ng (è¯æ±‡)</span>
                        <span class="arrow text-2xl transform transition-transform">â–¼</span>
                    </button>
                    <div class="suggestion-content mt-4">
                        <!-- Controls for Pinyin and Vietnamese -->
                        <div class="flex justify-around items-center mb-4 p-2 bg-gray-100 rounded-lg">
                            <div class="flex items-center">
                                <span class="mr-2 text-sm font-medium text-gray-700">Pinyin</span>
                                <label for="pinyinToggle" class="flex items-center cursor-pointer">
                                    <div class="relative">
                                        <input type="checkbox" id="pinyinToggle" class="sr-only">
                                        <div class="block bg-gray-300 w-10 h-6 rounded-full"></div>
                                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                                    </div>
                                </label>
                            </div>
                             <div class="flex items-center">
                                <span class="mr-2 text-sm font-medium text-gray-700">NghÄ©a Viá»‡t</span>
                                <label for="vietnameseToggle" class="flex items-center cursor-pointer">
                                    <div class="relative">
                                        <input type="checkbox" id="vietnameseToggle" class="sr-only">
                                        <div class="block bg-gray-300 w-10 h-6 rounded-full"></div>
                                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div id="vocab-container" class="space-y-4">
                            <!-- Vocab categories will be injected here by JS -->
                        </div>
                    </div>
                </div>

                <!-- Sentence Patterns -->
                <div class="suggestion-card bg-white p-4 rounded-2xl shadow-lg">
                    <button class="toggle-button w-full text-left font-bold text-lg text-teal-700 flex justify-between items-center">
                        <span>ğŸ“š Máº«u cÃ¢u (å¥å‹)</span>
                        <span class="arrow text-2xl transform transition-transform">â–¼</span>
                    </button>
                    <div class="suggestion-content mt-4">
                        <ul id="sentence-patterns" class="list-disc list-inside space-y-3 text-gray-700">
                           <!-- Sentence patterns will be injected here by JS -->
                        </ul>
                    </div>
                </div>

                <!-- Sample Text -->
                <div class="suggestion-card bg-white p-4 rounded-2xl shadow-lg">
                    <button class="toggle-button w-full text-left font-bold text-lg text-teal-700 flex justify-between items-center">
                        <span>ä¾‹æ–‡ BÃ i vÄƒn máº«u</span>
                        <span class="arrow text-2xl transform transition-transform">â–¼</span>
                    </button>
                    <div class="suggestion-content mt-4">
                        <div class="p-4 bg-gray-100 rounded-lg">
                            <h4 class="font-bold mb-2">æˆ‘çš„ä¸€å¤©</h4>
                            <p class="text-sm text-gray-700 leading-relaxed">
                                æˆ‘æ¯å¤©æ—©ä¸Šå…­ç‚¹åŠèµ·åºŠï¼Œä¸ƒç‚¹åƒæ—©é¥­ã€‚å·®ååˆ†å…«ç‚¹å»æ•™å®¤ï¼Œå…«ç‚¹ä¸Šè¯¾ã€‚ä¸Šåˆæˆ‘ä»¬æœ‰å››èŠ‚è¯¾ï¼ŒåäºŒç‚¹ä¸‹è¯¾ã€‚ä¸­åˆæˆ‘å»é£Ÿå ‚åƒåˆé¥­ã€‚åˆé¥­ä»¥åï¼Œæˆ‘å¸¸å¸¸å»æœ‹å‹å“ªå„¿èŠå¤©å„¿ã€‚ä¸‹åˆæ²¡æœ‰è¯¾çš„æ—¶å€™ï¼Œæˆ‘å»å›¾ä¹¦é¦†çœ‹ä¹¦ï¼Œæˆ–è€…è·Ÿä¸­å›½æœ‹å‹ä¸€èµ·ç»ƒä¹ å£è¯­ã€‚æœ‰æ—¶å€™åœ¨å®¿èˆçœ‹ç”µå½±å…‰ç›˜ã€‚å››ç‚¹æˆ‘å»æ“åœºé”»ç‚¼èº«ä½“ã€‚äº”ç‚¹å›å®¿èˆæ´—æ¾¡ï¼Œæ´—è¡£æœï¼Œå…­ç‚¹åŠæˆ–è€…ä¸ƒç‚¹åƒæ™šé¥­ã€‚æ™šä¸Šæˆ‘åšç»ƒä¹ ï¼Œå†™æ±‰å­—ï¼Œé¢„ä¹ è¯¾æ–‡å’Œç”Ÿè¯ï¼Œç„¶åçœ‹çœ‹ç”µè§†ï¼Œå¬å¬éŸ³ä¹ï¼Œåä¸€ç‚¹ç¡è§‰ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data for suggestions
        const vocabData = {
            "â˜€ï¸ Buá»•i sÃ¡ng (æ—©ä¸Š)": [
                { zh: "èµ·åºŠ", pinyin: "qÇchuÃ¡ng", vi: "Thá»©c dáº­y" },
                { zh: "åˆ·ç‰™", pinyin: "shuÄyÃ¡", vi: "ÄÃ¡nh rÄƒng" },
                { zh: "æ´—è„¸", pinyin: "xÇliÇn", vi: "Rá»­a máº·t" },
                { zh: "åƒæ—©é¥­", pinyin: "chÄ« zÇofÃ n", vi: "Ä‚n sÃ¡ng" },
                { zh: "ä¸Šè¯¾", pinyin: "shÃ ngkÃ¨", vi: "VÃ o há»c" },
                { zh: "ä¸Šç­", pinyin: "shÃ ngbÄn", vi: "Äi lÃ m" },
                { zh: "æ•™å®¤", pinyin: "jiÃ oshÃ¬", vi: "PhÃ²ng há»c" },
            ],
            "ğŸŒ¤ï¸ Buá»•i trÆ°a & chiá»u (ä¸­åˆå’Œä¸‹åˆ)": [
                { zh: "åƒåˆé¥­", pinyin: "chÄ« wÇ”fÃ n", vi: "Ä‚n trÆ°a" },
                { zh: "ä¸‹è¯¾", pinyin: "xiÃ kÃ¨", vi: "Tan há»c" },
                { zh: "ä¸‹ç­", pinyin: "xiÃ bÄn", vi: "Tan lÃ m" },
                { zh: "ä¼‘æ¯", pinyin: "xiÅ«xi", vi: "Nghá»‰ ngÆ¡i" },
                { zh: "å›¾ä¹¦é¦†", pinyin: "tÃºshÅ«guÇn", vi: "ThÆ° viá»‡n" },
                { zh: "æ“åœº", pinyin: "cÄochÇng", vi: "SÃ¢n váº­n Ä‘á»™ng" },
                { zh: "é”»ç‚¼èº«ä½“", pinyin: "duÃ nliÃ n shÄ“ntÇ", vi: "Táº­p thá»ƒ dá»¥c" },
                { zh: "è·‘æ­¥", pinyin: "pÇobÃ¹", vi: "Cháº¡y bá»™" },
            ],
            "ğŸŒ™ Buá»•i tá»‘i (æ™šä¸Š)": [
                { zh: "åƒæ™šé¥­", pinyin: "chÄ« wÇnfÃ n", vi: "Ä‚n tá»‘i" },
                { zh: "å›å®¿èˆ", pinyin: "huÃ­ sÃ¹shÃ¨", vi: "Vá» kÃ½ tÃºc xÃ¡" },
                { zh: "æ´—æ¾¡", pinyin: "xÇ zÇo", vi: "Táº¯m" },
                { zh: "æ´—è¡£æœ", pinyin: "xÇ yÄ«fu", vi: "Giáº·t Ä‘á»“" },
                { zh: "åšç»ƒä¹ ", pinyin: "zuÃ² liÃ nxÃ­", vi: "LÃ m bÃ i táº­p" },
                { zh: "å†™æ±‰å­—", pinyin: "xiÄ› hÃ nzÃ¬", vi: "Viáº¿t chá»¯ HÃ¡n" },
                { zh: "çœ‹ç”µè§†", pinyin: "kÃ n diÃ nshÃ¬", vi: "Xem TV" },
                { zh: "å¬éŸ³ä¹", pinyin: "tÄ«ng yÄ«nyuÃ¨", vi: "Nghe nháº¡c" },
                { zh: "ä¸Šç½‘", pinyin: "shÃ ng wÇng", vi: "LÃªn máº¡ng" },
                { zh: "ç¡è§‰", pinyin: "shuÃ¬jiÃ o", vi: "Äi ngá»§" },
            ],
            "âš™ï¸ Äá»™ng tá»« & Tá»« ná»‘i (åŠ¨è¯å’Œè¿è¯)": [
                { zh: "å»", pinyin: "qÃ¹", vi: "Äi" },
                { zh: "æ¥", pinyin: "lÃ¡i", vi: "Äáº¿n" },
                { zh: "åœ¨", pinyin: "zÃ i", vi: "á»" },
                { zh: "åš", pinyin: "zuÃ²", vi: "LÃ m" },
                { zh: "çœ‹", pinyin: "kÃ n", vi: "Xem, Ä‘á»c" },
                { zh: "è·Ÿ...ä¸€èµ·", pinyin: "gÄ“n...yÄ«qÇ", vi: "CÃ¹ng vá»›i..." },
                { zh: "ä»¥å", pinyin: "yÇhÃ²u", vi: "Sau khi" },
                { zh: "çš„æ—¶å€™", pinyin: "de shÃ­hÃ²u", vi: "Khi..." },
                { zh: "ç„¶å", pinyin: "rÃ¡nhÃ²u", vi: "Sau Ä‘Ã³" },
                { zh: "æˆ–è€…", pinyin: "huÃ²zhÄ›", vi: "Hoáº·c lÃ " },
                { zh: "å¸¸å¸¸", pinyin: "chÃ¡ngchÃ¡ng", vi: "ThÆ°á»ng xuyÃªn" },
                { zh: "æœ‰æ—¶å€™", pinyin: "yÇ’u shÃ­hÃ²u", vi: "CÃ³ lÃºc" },
            ]
        };

        const sentencePatternsData = [
            "<strong>Biá»ƒu Ä‘áº¡t thá»i gian:</strong><br>æˆ‘ [buá»•i] [giá»] [phÃºt] [hÃ nh Ä‘á»™ng].<br><i>(VD: æˆ‘æ—©ä¸Šå…­ç‚¹åŠèµ·åºŠã€‚)</i>",
            "<strong>Tuáº§n tá»± hÃ nh Ä‘á»™ng (1):</strong><br>[HÃ nh Ä‘á»™ng 1] ä»¥å, æˆ‘ [hÃ nh Ä‘á»™ng 2].<br><i>(VD: åˆé¥­ä»¥å, æˆ‘å¸¸å¸¸å»æœ‹å‹é‚£å„¿èŠå¤©å„¿ã€‚)</i>",
            "<strong>Tuáº§n tá»± hÃ nh Ä‘á»™ng (2):</strong><br>æˆ‘å…ˆ [hÃ nh Ä‘á»™ng 1], ç„¶å [hÃ nh Ä‘á»™ng 2].<br><i>(VD: æˆ‘å…ˆæ´—æ¾¡, ç„¶åç¡è§‰ã€‚)</i>",
            "<strong>Biá»ƒu Ä‘áº¡t lá»±a chá»n:</strong><br>æˆ‘ [hÃ nh Ä‘á»™ng 1] æˆ–è€… [hÃ nh Ä‘á»™ng 2].<br><i>(VD: æˆ‘å»å›¾ä¹¦é¦†çœ‹ä¹¦, æˆ–è€…è·Ÿæœ‹å‹ä¸€èµ·ç»ƒä¹ å£è¯­ã€‚)</i>",
            "<strong>Thá»i gian kÃ©m:</strong><br>å·® [sá»‘ phÃºt] [giá»] [hÃ nh Ä‘á»™ng].<br><i>(VD: å·®ååˆ†å…«ç‚¹å»æ•™å®¤ã€‚)</i>"
        ];
        
        // DOM Elements
        const writingArea = document.getElementById('writingArea');
        const charCounter = document.getElementById('charCounter');
        const clearButton = document.getElementById('clearButton');
        const toggleButtons = document.querySelectorAll('.toggle-button');
        const vocabContainer = document.getElementById('vocab-container');
        const sentencePatternsContainer = document.getElementById('sentence-patterns');
        const pinyinToggle = document.getElementById('pinyinToggle');
        const vietnameseToggle = document.getElementById('vietnameseToggle');

        // --- Functions ---

        // Function to populate vocabulary
        function populateVocabulary() {
            vocabContainer.innerHTML = '';
            for (const category in vocabData) {
                const categoryDiv = document.createElement('div');
                categoryDiv.innerHTML = `<h4 class="font-semibold text-gray-600 mb-2">${category}</h4>`;
                
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'grid grid-cols-2 gap-2';
                
                vocabData[category].forEach(word => {
                    const btn = document.createElement('div');
                    btn.className = 'vocab-btn bg-teal-50 hover:bg-teal-100 text-teal-800 text-sm font-medium p-2 rounded-md shadow-sm cursor-pointer';
                    btn.dataset.text = word.zh;
                    
                    btn.innerHTML = `
                        <div class="flex-grow text-left">
                            <span class="font-bold">${word.zh}</span>
                            <span class="pinyin text-xs text-gray-500 ml-1">${word.pinyin}</span>
                            <span class="vietnamese text-xs text-teal-600 italic">${word.vi}</span>
                        </div>
                        <span class="speaker-icon" data-text="${word.zh}" title="Nghe phÃ¡t Ã¢m">ğŸ”Š</span>
                    `;
                    buttonContainer.appendChild(btn);
                });
                
                categoryDiv.appendChild(buttonContainer);
                vocabContainer.appendChild(categoryDiv);
            }
        }

        function populateSentencePatterns() {
            sentencePatternsContainer.innerHTML = '';
            sentencePatternsData.forEach(pattern => {
                const li = document.createElement('li');
                li.innerHTML = pattern;
                sentencePatternsContainer.appendChild(li);
            });
        }

        function insertAtCursor(myField, myValue) {
            // Function implementation remains the same
            if (document.selection) {
                myField.focus();
                sel = document.selection.createRange();
                sel.text = myValue;
            } else if (myField.selectionStart || myField.selectionStart == '0') {
                var startPos = myField.selectionStart;
                var endPos = myField.selectionEnd;
                myField.value = myField.value.substring(0, startPos) +
                    myValue +
                    myField.value.substring(endPos, myField.value.length);
                myField.selectionStart = startPos + myValue.length;
                myField.selectionEnd = startPos + myValue.length;
            } else {
                myField.value += myValue;
            }
            myField.focus();
            updateCharCount();
        }

        function updateCharCount() {
            const count = writingArea.value.length;
            charCounter.textContent = `Sá»‘ chá»¯: ${count}`;
        }

        // Function to speak text
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-CN'; // Set language to Chinese
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            } else {
                alert('TrÃ¬nh duyá»‡t cá»§a báº¡n khÃ´ng há»— trá»£ chá»©c nÄƒng phÃ¡t Ã¢m.');
            }
        }

        // --- Event Listeners ---

        writingArea.addEventListener('input', updateCharCount);

        clearButton.addEventListener('click', () => {
             // Use a custom modal in a real app, but confirm is fine for this context
            if (window.confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a toÃ n bá»™ ná»™i dung?')) {
                writingArea.value = '';
                updateCharCount();
            }
        });

        toggleButtons.forEach(button => {
            button.addEventListener('click', () => {
                const content = button.nextElementSibling;
                const arrow = button.querySelector('.arrow');
                content.classList.toggle('open');
                arrow.classList.toggle('rotate-180');
            });
        });

        // Event delegation for vocabulary buttons
        vocabContainer.addEventListener('click', (e) => {
            const speakerIcon = e.target.closest('.speaker-icon');
            const vocabBtn = e.target.closest('.vocab-btn');

            if (speakerIcon) {
                e.stopPropagation(); // Prevent inserting text when clicking speaker
                speak(speakerIcon.dataset.text);
            } else if (vocabBtn) {
                insertAtCursor(writingArea, vocabBtn.dataset.text);
            }
        });

        // Toggle Pinyin visibility
        pinyinToggle.addEventListener('change', (e) => {
            vocabContainer.classList.toggle('show-pinyin', e.target.checked);
            // Style the toggle
            const dot = e.target.nextElementSibling.nextElementSibling;
            if (e.target.checked) {
                dot.style.transform = 'translateX(100%)';
                e.target.nextElementSibling.style.backgroundColor = '#14B8A6';
            } else {
                dot.style.transform = 'translateX(0)';
                e.target.nextElementSibling.style.backgroundColor = '';
            }
        });
        
        // Toggle Vietnamese meaning visibility
        vietnameseToggle.addEventListener('change', (e) => {
            vocabContainer.classList.toggle('show-vietnamese', e.target.checked);
             // Style the toggle
            const dot = e.target.nextElementSibling.nextElementSibling;
            if (e.target.checked) {
                dot.style.transform = 'translateX(100%)';
                e.target.nextElementSibling.style.backgroundColor = '#14B8A6';
            } else {
                dot.style.transform = 'translateX(0)';
                e.target.nextElementSibling.style.backgroundColor = '';
            }
        });


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            populateVocabulary();
            populateSentencePatterns();
            updateCharCount();
        });
    </script>
    <style>
        /* Additional styles for the toggle switch */
        input:checked ~ .dot {
            transform: translateX(100%);
            background-color: #fff;
        }
        input:checked ~ div:first-of-type {
            background-color: #10B981; /* A slightly different green for checked state */
        }
    </style>
</body>
</html>
